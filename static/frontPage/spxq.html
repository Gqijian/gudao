<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,height=device-height, user-scalable=no,initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>商品详情</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/spxq.css"/>
    <link rel="stylesheet" type="text/css" href="css/swipe.css">
    <script src="js/jquery-1.11.2.js"></script>
    <script type="text/javascript" src="js/touch.js"></script>
    <script src="js/Product.js"></script>

    <script>
        var soleData;
        var id = GetRequest();
         queryGoodsInfo();
         function queryGoodsInfo(){
                 $.ajax({
                    type:"get",
                    url:'http://localhost:9876/gudao/product/productInfo?id='+id.id,
                    dataType:"jsonp",
                    jsonp:"cb",
                    jsonpCallback:"callback",
                    success:function (data) {
                        var product = new Product({
                         name:data.productName,
                        info:data.productDescription,
                        price:data.productPrice,
                        images:[data.productIconOne,data.productIconTwo,data.productIconThree]
                 });
                        soleData = product;
                 product.init();
                 },error:function (e) {

                 }
             })
         }
        function GetRequest() {
            var url = location.search;
            console.log(url)//获取url中"?"符后的字串
            var theRequest = new Object();
            if (url.indexOf("?") != -1) {
                var str = url.substr(1);
                strs = str.split("&");
                for (var i = 0; i < strs.length; i++) {
                    theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
                }
            }
            return theRequest;
        }
         $(function () {
             $("#addCarBtn").click(function(){
                 var id = GetRequest();
                 var url = "http://localhost:9876/gudao/cart/add?num=1&id="+id.id;
                 $.ajax({
                     type:"get",
                     url:url,
                     success:function (data) {
                         alert("添加成功");

                         Location.href="shooppingCart.html";
                     },error:function (e) {

                     }
                 })
             })
         })

    </script>
</head>
<body>

<div class="body">
    <div class="tour">
        <a href="allGoods.html" class="tour1"><img src="images/back.png" alt="" style="height: 26px;width: 20px"></a>
        <p>商品详情</p>
    </div>
    <figure>
        <div class="addWrap">
            <div class="swipe" id="mySwipe">
                <div class="swipe-wrap">
                    <div><a href="javascript:;"><img class="img-responsive" src="images/4.jpg"/></a></div>
                    <div><a href="javascript:;"><img class="img-responsive" src="images/12.jpg"/></a></div>
                    <div><a href="javascript:;"><img class="img-responsive" src="images/1.jpg"/></a></div>
                </div>
            </div>
            <ul id="position">
                <li class="cur"></li>
                <li class=""></li>
                <li class=""></li>
            </ul>
        </div>
        <!-- 轮播 -->
        <script src="js/swipe.js"></script>
        <script type="text/javascript">
            var bullets = document.getElementById('position').getElementsByTagName('li');
            var banner = Swipe(document.getElementById('mySwipe'), {
                auto: 3000,
                continuous: true,
                disableScroll:false,
                callback: function(pos) {
                    var i = bullets.length;
                    while (i--) {
                        bullets[i].className = ' ';
                    }
                    bullets[pos].className = 'cur';
                }
            });
        </script>
        <p id="proName">商品价格</p>
        <div class="info">
            <em class="sat">￥<span id="price"></span> </em>
            <a href="javascript:false"><button type="button" class="btn" id="addCarBtn">加入购物车</button></a>
        </div>
    </figure>
    <hr/>
    <div class="sjxx">
        <span class="pclass1" id="goodInfo">商家信息商家信息商家信息商家信息商家信息商家信息商家信息商家信息商家信息商家信息商家信息商家信息商家信息商家信息</span>
    </div>
    <hr/>
    <div style="height: 5rem"></div>
    <div class="wx_nav" id="wx_nav">
        <a href="javascript:;" class="nav_index" id="nav_index">首页</a>
        <a href="shoppingCart.html" class="nav_shopcart" id="nav_shopcart">购物车</a>
        <a href="javascript:;" class="nav_me on" id="nav_me on">订单</a>
    </div>
    <div class="theme-popover-mask"></div>
</div>
</body>
</html>