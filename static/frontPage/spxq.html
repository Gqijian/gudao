<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,height=device-height, user-scalable=no,initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>商品详情</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/spxq.css"/>
    <link rel="stylesheet" type="text/css" href="css/swipe.css">
    <script src="js/jquery-1.11.2.js"></script>
    <script type="text/javascript" src="js/touch.js"></script>
    <script src="js/Product.js"></script>

    <script>
         queryGoodsInfo();
         function queryGoodsInfo(){
             var id = GetRequest();
                 $.ajax({
                    type:"get",
                    url:url+id,
                    dataType:"jsonp",
                    jsonp:"cb",
                    success:function (data) {
                        var product = new Product({
                        info:data.info,
                        address:data.address,
                        phone:data.phone,
                        price:data.price,
                        images:data.images
                 });
                 product.init();
                 },error:function (e) {

                 }
             })
         }
        function GetRequest() {
            var url = location.search;
            console.log(url)//获取url中"?"符后的字串
            var theRequest = new Object();
            if (url.indexOf("?") != -1) {
                var str = url.substr(1);
                strs = str.split("&");
                for (var i = 0; i < strs.length; i++) {
                    theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
                }
            }
            return theRequest;
        }
         $(function () {
             $("#addCarBtn").click(function(){
                 var id = GetRequest();
                 var url = "http://gudao/cart/add"+id;
                 $.ajax({
                     type:"get",
                     url:url,
                     success:function (data) {

                     },error:function (e) {

                     }
                 })
             })
         })

    </script>
</head>
<body>
<div class="body">
    <div class="tour">
        <a href="allGoods.html" class="tour1"><img src="images/back.png" alt="" style="height: 26px;width: 20px"></a>
        <p>商品详情</p>
        <a href="myList.html" class="tour2"><img src="images/u65.png" alt="" style="width: 35px;height: 35px"></a>
    </div>
    <figure>
        <div class="addWrap">
            <div class="swipe" id="mySwipe">
                <div class="swipe-wrap">
                    <div><a href="javascript:;"><img class="img-responsive" src="images/thing.png"/></a></div>
                    <div><a href="javascript:;"><img class="img-responsive" src="images/thing.png"/></a></div>
                    <div><a href="javascript:;"><img class="img-responsive" src="images/thing.png"/></a></div>
                </div>
            </div>
            <ul id="position">
                <li class="cur"></li>
                <li class=""></li>
                <li class=""></li>
            </ul>
        </div>
        <!-- 轮播 -->

        <p>商品价格</p>
        <div class="info">
            <em class="sat">￥100</em>
            <a href="javascript:false"><button type="button" class="btn" id="addCarBtn">加入购物车</button></a>
        </div>
    </figure>
    <hr/>
    <div class="sjxx">
        <p class="pclass1">商家信息</p>
    </div>
    <hr/>
    <div class="sjxx" >
        <p class="pclass2">地址：第三方克拉斯的减肥了卡时间段</p>
        <p class="pclass2">电话：11111111111</p>
    </div>
    <div style="height: 5rem"></div>
    <div class="wx_nav" id="wx_nav">
        <a href="javascript:;" class="nav_index" id="nav_index">首页</a>
        <a href="javascript:;" class="nav_shopcart" id="nav_shopcart">购物车</a>
        <a href="javascript:;" class="nav_me on" id="nav_me on">订单</a>
    </div>
</div>
</body>
<script src="js/swipe.js"></script>
<script type="text/javascript">
    var bullets = document.getElementById('position').getElementsByTagName('li');
    var banner = Swipe(document.getElementById('mySwipe'), {
        auto: 3000,
        continuous: true,
        disableScroll:false,
        callback: function(pos) {
            var i = bullets.length;
            while (i--) {
                bullets[i].className = ' ';
            }
            bullets[pos].className = 'cur';
        }
    });

</script>
</html>